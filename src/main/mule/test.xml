<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:ldap="http://www.mulesoft.org/schema/mule/ldap" xmlns:db="http://www.mulesoft.org/schema/mule/db"
	xmlns:java="http://www.mulesoft.org/schema/mule/java"
	xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:crypto="http://www.mulesoft.org/schema/mule/crypto" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/crypto http://www.mulesoft.org/schema/mule/crypto/current/mule-crypto.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/java http://www.mulesoft.org/schema/mule/java/current/mule-java.xsd
http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd
http://www.mulesoft.org/schema/mule/ldap http://www.mulesoft.org/schema/mule/ldap/current/mule-ldap.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	 <http:listener-config name="HTTP_Listener_config" doc:name="HTTP Listener config" doc:id="5bbe127a-50a6-479b-832f-06e10f6fd741">
        <http:listener-connection host="0.0.0.0" port="8085" />
    </http:listener-config>
   <crypto:jce-config name="Crypto_Jce" doc:name="Crypto Jce" doc:id="c9749e6b-9ece-403f-9783-85feb4b41141" keystore="encryptKey.jceks" password="password" type="JCEKS">
        <crypto:jce-key-infos>
			<crypto:jce-symmetric-key-info keyId="encryptKey" alias="encryptKey" password="password" />

        </crypto:jce-key-infos>
    </crypto:jce-config>
	<db:config name="Database_Config" doc:name="Database Config" doc:id="14f340e5-ef3e-4290-ac23-f33d8aebb4ea" >
		<db:oracle-connection host="ldap://usrtdodw01.crocentralqc.com" port="5000" user="I2_RO2" password="u5ybstpm" serviceName="DWH01,cn=OracleContext,dc=qworld,dc=quintiles,dc=com" />
	</db:config>
	<db:config name="Database_Config1" doc:name="Database Config" doc:id="5dc9c570-a8dc-4aaf-bcd0-6c35a176b5dd" >
		<db:mssql-connection host="usrtsqldev01.pharmalinkfhidev.com" user="i2" password="i2" databaseName="I2" />
	</db:config>
	<flow name="JCECryptographyEncryptionFlow" doc:id="98eab942-20d3-435c-ba35-c35571a2090e">
        <http:listener doc:name="Listener" doc:id="faa59ee2-efc4-4678-a778-26aca4d25041" config-ref="HTTP_Listener_config" path="/encrypt" />
		<ee:transform doc:name="Transform Message" doc:id="eb19ba41-56ec-47c2-affa-a7612764cbd8" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
import * from dw::core::Strings
output application/json
---
test : camelize(('CTMS-Outbound-SiteVisit' splitBy('-'))[2])]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<db:insert doc:name="Insert" doc:id="5b3ff211-ac5c-4811-b2e1-891b6e1c5b10" config-ref="Database_Config1">
			<db:sql >insert into dbo.contact ( first_name) values ('HimTest')</db:sql>
		</db:insert>
    
</flow>
</mule>
